<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>AI Card – Generate Photo</title>
  <style>
    /* (aapke existing styles yahin rahenge) */
    body {
      margin: 0; min-height:100vh;
      background: linear-gradient(135deg, #322D47 0, #1E223E 100%);
      font-family: 'Segoe UI', Arial, sans-serif;
    }
    .container {
      width:98vw; max-width:410px; background:rgba(23,18,38,0.83);
      border-radius:22px; box-shadow:0 6px 22px #00000045;
      margin:38px auto 18px; padding:27px 14px 22px;
    }
    .how-use {
      background: #191935dc; color: #f3f3ff;
      border-radius: 16px; padding:13px 10px 7px; margin-bottom:20px;
      font-size:1.07rem;
      box-shadow:0 2px 12px #15155a0c;
    }
    .how-use h2 {
      font-size:1.12rem;font-weight:700;color:#81e6ff;margin-bottom:7px;margin-top:0;
      letter-spacing:0.5px;text-align:center;
    }
    .how-use ol {
      margin:0 0 7px 18px;padding:0;font-size:0.98rem;line-height:1.67;
      color:#ddeeff;
    }
    .card-title {text-align:center;font-size:1.33rem;font-weight:700;color:#fde2ff;margin-bottom:5px;}
    .prompt-text {color:#a7e1ed;font-size:1.03rem;margin-bottom:12px;text-align:center;font-weight:400;word-break:break-word;}
    .copy-prompt-btn {
      display: block;
      width: 120px;
      margin: 0 auto 20px;
      background: #41cf60;
      color: white;
      border: none;
      border-radius: 12px;
      padding: 8px 0;
      font-weight: 600;
      cursor: pointer;
      font-size: 1rem;
      box-shadow: 0 2px 10px #25ffcc66;
      transition: background-color 0.3s;
    }
    .copy-prompt-btn:hover {
      background: #2fb34b;
    }
    /* baaki styles aapke existing honge */
    .upload-section { margin-bottom:22px; text-align:center; }
    .file-label {
      background:linear-gradient(90deg,#41cf60 0,#20e6d2 100%);
      color:#fff; padding:9px 24px; border-radius:20px; font-weight:500;
      cursor:pointer; display:inline-block; margin-bottom:10px;
      font-size:1.05rem; box-shadow:0 2px 8px #25ffcc22; border:none;
    }
    #fileInput {display:none;}
    #previewImg {
      display:block;margin:10px auto 16px;width:96%;max-width:340px;aspect-ratio:16/9;height:auto;
      object-fit:cover;border-radius:15px;box-shadow:0 2px 12px #00000018;background:#fff;
    }
    .ai-buttons {
      display: flex; flex-wrap:wrap; gap:10px 14px; justify-content:center; margin:16px 0 7px;
    }
    .ai-btn {
      background:linear-gradient(90deg,#5e5fff 0,#41cf60 100%);
      color:#fff;font-weight:700;border:none;border-radius:18px;padding:11px 18px;
      font-size:0.98rem;cursor:pointer;transition:all 0.17s;box-shadow:0 2px 12px #15156623;min-width:110px;
      margin-bottom:7px;
    }
    .ai-btn:hover { opacity:0.93; transform:translateY(-2px);}
    .copied-text {color:#94f5b7;font-size:0.99rem;text-align:center;margin-top:9px;}
    @media (max-width:480px){ .container{padding:14px 4vw 16px;} #previewImg{max-width:97vw;} .card-title{font-size:1.15rem;} }
  </style>
</head>
<body>
  <div class="container">
    <!-- HOW TO USE SECTION -->
    <div class="how-use">
      <h2>How to use</h2>
      <ol>
        <li>अपनी फोटो "Choose file" से upload करें और preview देखें।</li>
        <li>नीचे दिख रहे prompt को कॉपी करने के लिए "Copy Prompt" या "AI Generate Now" दबाएँ।</li>
        <li>अपनी पसंदीदा AI app/web चुनें जिसमें फोटो upload करें और prompt paste करें।</li>
        <li>उस AI साइट/ऐप में Image Create, Edit या Modify करें।</li>
      </ol>
      <div style="font-size:0.95rem;color:#afffb3;text-align:center;">Advanced: Prompt copy होते ही Clipboard पर चला जाता है, बस paste करें!</div>
    </div>
    <!-- ACTUAL CARD DATA -->
    <div class="card-title" id="cardTitle"></div>
    <div class="prompt-text" id="cardPrompt"></div>
    <button class="copy-prompt-btn" id="copyPromptBtn">Copy Prompt</button>
    <div class="upload-section">
      <label for="fileInput" class="file-label">अपनी फोटो चुनें</label>
      <input type="file" id="fileInput" accept="image/*" />
      <img id="previewImg" style="display:none;" />
    </div>
    <button class="ai-btn" id="genBtn">AI Generate Now</button>
    <div class="copied-text" id="copiedText"></div>
    <!-- 4-5 AI Web/App Buttons -->
    <div class="ai-buttons">
      <button class="ai-btn" onclick="window.open('https://copilot.microsoft.com/', '_blank')">Copilot AI (Microsoft)</button>
      <button class="ai-btn" onclick="window.open('https://chat.openai.com/', '_blank')">ChatGPT (DALL-E)</button>
      <button class="ai-btn" onclick="window.open('https://app.leonardo.ai/', '_blank')">Leonardo.AI</button>
      <button class="ai-btn" onclick="window.open('https://huggingface.co/spaces/stablediffusion/stable-diffusion', '_blank')">Stable Diffusion Web</button>
      <button class="ai-btn" onclick="window.open('https://www.bing.com/images/create/', '_blank')">Bing Image Creator</button>
    </div>
  </div>
  <script>
    const backendBase = 'https://aiimage-q8fv.onrender.com';
    const urlParams = new URLSearchParams(window.location.search);
    const cardId = urlParams.get('id');
    async function fetchCard() {
      try {
        const res = await fetch(`${backendBase}/api/cards/${cardId}`);
        if (!res.ok) throw new Error('Card not found');
        return await res.json();
      } catch (err) {
        return null;
      }
    }
    async function init() {
      const card = await fetchCard();
      if (!card) {
        document.getElementById('cardTitle').textContent = 'Card Not Found!';
        document.getElementById('cardPrompt').textContent = '';
        document.getElementById('copiedText').textContent = '';
        return;
      }
      document.getElementById('cardTitle').textContent = card.buttonName || 'AI Card';
      document.getElementById('cardPrompt').textContent = card.promptText || '';
      document.getElementById('copiedText').textContent = '';
      // Copy Prompt Button Logic
      const copyPromptBtn = document.getElementById('copyPromptBtn');
      copyPromptBtn.onclick = function () {
        const prompt = document.getElementById('cardPrompt').textContent;
        copyPromptBtn.textContent = 'COPIED!';
        navigator.clipboard.writeText(prompt).then(() => {
          setTimeout(() => (copyPromptBtn.textContent = 'Copy Prompt'), 1500);
        });
      };
      // File upload/preview logic
      const fileInput = document.getElementById('fileInput');
      const previewImg = document.getElementById('previewImg');
      fileInput.onchange = function (e) {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function (ev) {
            previewImg.src = ev.target.result;
            previewImg.style.display = 'block';
          };
          reader.readAsDataURL(file);
        } else {
          previewImg.style.display = 'none';
        }
      };
      // Generate Now Button Logic
      document.getElementById('genBtn').onclick = function () {
        navigator.clipboard.writeText(card.promptText).then(() => {
          document.getElementById('copiedText').textContent =
            'Prompt copied! अब अपनी पसंदीदा AI साइट पर फोटो upload करें और prompt paste करें.';
        });
      };
    }
    init();
  </script>
</body>
</html>
